
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="../student/header.html">

<!DOCTYPE html>
<html>
<head>
	<title>Product manager</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width , initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="headercss.css">
</head>
<body>
	<div class="containall">
		<div class="header" id="headerforcomputer">
			<!-- the first big navigator-->
			<div class="bignavigator navbar row">
				<!-- navigator left -->
				<div class="bignavigatorleft col-md-6 col-xs-12">
					<div class="bignavigatorleftcontent">
						<font size="2"><b>GIVE YOU THE BEST MAGEMENT</b></font>
					</div>
				</div>
				<!-- navigator right -->
				
				<div class="nignavigatorright row col-md-6 col-xs-12">
					<div class="nignavigatorrightproperties col-md-2 col-xs-12" class="fa fa-question-circle-o"><font size="2">Contact US</font></div>
					<div class="nignavigatorrightproperties col-md-2 col-xs-12"><font size="2"><i class="fa fa-question-circle-o"></i>  Help</font></div>
					<div class="nignavigatorrightproperties col-md-2 col-xs-12"><font size="2">Log out</font></div>
					<div class="nignavigatorrightproperties col-md-3  col-xs-12" class="fa fa-user-o"><font size="2"><i class="fa fa-user-o"></i> Account</font></div>
					<div class="nignavigatorrightproperties col-md-3  col-xs-12" class="fa fa-shopping-bag"><font size="2">ADMIN SECTION</font></div>
				</div>
				
			</div>
			
			<!-- logo image-->
			<div class="searcharea">
				<div class="row">
					<div class="searchareaproperties col-md-3 col-sm-12 col-xs-6"> <img class="img-responsive" alt="icon" src="../picture/horny.png"></div>

					<div class="searchareainput col-md-6 col-sm-12 col-xs-6"> 
						<!-- input in input-->
						<div class="row">
							<input type="text" placeholder="Search the entire shop here" name="search" id="input" style="position: relative;" class="">
							
							<button class="" type="button"><i class="fa fa-search" style="color: white"></i></button>
						</div>
						<div class="row">
							<span style="clear: both;" id="resultprint"></span>
						</div>
					</div>
					<div id="match-list"></div>

					<div class="searchareaproperties col-md-3 col-sm-12 col-xs-12"> 
						<div class="contactinsearch"><font size="+1"><b> Call / SMS/ What's App</b></font></div>
						<div class="contactinsearch"><font size="+3"><b>+6597772176</b></font></div>
					</div>
				</div>
			</div>
			<!-- product navigator-->
			<div class="productnavigator">
				<div class="row" style="">
					<center><h1 style="padding-bottom: 30px;">Choose your section </h1></center>
				</div>
				<ul class="navigatorproperties" style="margin-top: 30px;">
					<div class="row">
						
						<li class="col-md-4 col-sm-6 col-xs-6"> 
							<center>
								<button onclick="window.location.href='../allocation/addallocation.html'" class="btn-primary">
									ADD A ALLOCATION
								</button>
							</center>
						</li>
						<li class="col-md-4 col-sm-4 col-xs-4"> 
							<center>
								<button onclick="window.location.href='header.html'" class="btn-primary">
									BACK TO MAIN MENU
								</button>
							</center>
						</li>
						<li class="col-md-4 col-sm-6 col-xs-6"> 
							<center>
								<button onclick="window.location.href='../allocation/displayallocation.html'" class="btn-primary">
									DISPLAY ALL ALLOCATIOn
								</button>
							</center>
						</li>
					</div>
					
				</ul>
			</div>
		</div>
		<center>
			<p id="showData"></p>
		</center>
		<p>Back to home page <a href="../staff/header.html">HOME</a>.</p>
		
	</div>
</body>
</html>


<script type="text/javascript">
	$.ajax({
              type: 'GET', //Sử dụng kiểu gửi dữ liệu POST
              url: 'https://etutoring-project.azurewebsites.net/api/allocation/view-all-allocations',
              headers: {"Authorization": "Bearer Wd_GouzydhCnuXv80TYCPYML8yBfyIMJ7HTFSHf3cPxAn1JW994xk0mizSWbWP4BUqkN24eQBLi4NF84TCH2UtH1k8ty2mZ2p2bpj8NQ_64H9qWV8kNWRzwTBErGEoMPeKNKwhJHmL0AxeYPcERVgvLk12Phvg4LpokxQgRCnkc87abVkPIy2AsOLwObKKsFQnMpBOEMeT485qF4yzBHUm8g4Ip1Ibpd06N4UxAxzh-jLch-8-fBf8XV0MYqdwCz6w3MikGJqIC1isTtXpD21o21fPk8cCfJyKYTOmmk52uXk6QyzFeMuCwsIhpatbcRSOFkbBdHz6MEhNQPdd2iMMCW6yEsU487Z1qSngHyCYeq0LWjz4cCXk5PzeqKzo2S"},
              dataType: 'json',
              cache: false,
              contentType: false,
              processData: false,
              success : function(data)  // Hàm thực thi khi nhận dữ liệu được từ server
              {
              	if (data == 'false') {
              		alert('json is not sent');
              	} else {
              		console.log(data.allocations);
              		var col = [];
              		var student = [];
              		var tutor = [];
              		col.push("number");
              		for (var i = 0; i < data.allocations.length; i++) {
              			for (var key in data.allocations[i]) {
              				if (col.indexOf(key) === -1) {
              					col.push(key);
              				}
              			}
              		}

              		var table = document.createElement("table");
              		table.border = '1px solid black ';
              		table.classList.add('table-striped');
              		table.style = 'margin : auto; width : 80%';

              		var tr = table.insertRow(-1);

              		for (var i = 0; i < col.length; i++) {
              			var th = document.createElement("th");
              			th.style  = 'text-align : center';
              			th.innerHTML = col[i];

              			tr.appendChild(th);

              		}

					// ADD JSON DATA TO THE TABLE AS ROWS.
					for (var j = 0; j < col.length; j++) {
						tr = table.insertRow(-1);
						var tabCell1 = tr.insertCell(-1);
						tabCell1.innerHTML = j+1;
						var tabCell2 = tr.insertCell(-1);
						tabCell2.innerHTML ="id : " + data.allocations[j].tutor.id + " / name : " + data.allocations[j].tutor.fullName;
						var tabCell3 = tr.insertCell(-1);
						console.log(data.allocations[j])
						for (var i = data.allocations[j].students.length - 1; i >= 0; i--) {
							console.log(data.allocations[j].students)
							tabCell3.innerHTML += "id :" + data.allocations[j].students[i].id + "  name : " + data.allocations[j].students[i].fullName + "<br>";
						}

						tabCell1.style = 'text-align : center';
						tabCell2.style = 'text-align : center';
						tabCell3.style = 'text-align : center';
						tabCell3.id = "tab3";
					}
					var divContainer = document.getElementById("showData");

					divContainer.appendChild(table);

				}
			}
		});
	</script>